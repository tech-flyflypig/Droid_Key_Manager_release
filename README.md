# Droid Key Manager



一个功能完善的 Droid Key 管理工具，使用 PyQt6 开发，具备美观的现代化界面。

## ✨ 功能特性



- 📥 **Token导入** - 支持从JSON文件批量导入Token
- 📤 **Token导出** - 支持将Token导出为JSON文件
- 📊 **用量查询** - 实时查看Token的使用情况和剩余量
- ➕ **添加Token** - 快速添加新的Token
- ✏️ **编辑Token** - 修改Token信息
- 🗑️ **删除Token** - 删除不需要的Token
- 🔄 **刷新功能** - 更新Token使用情况
- 📋 **复制Token** - 一键复制Token到剪贴板
- ⏸️ **暂停/恢复** - 暂停或恢复Token使用
- 🔑 **环境变量切换** - 一键设置API Key到系统环境变量（支持Windows/macOS/Linux）
- 🎴 **视图切换** - 支持卡片视图和列表视图自由切换，满足不同使用习惯
- 🎨 **现代化UI** - 深色主题，美观的卡片布局

## 📸 界面预览



应用程序采用现代化深色主题设计，Token以卡片形式展示，包含：

- Token域名和创建时间
- 账号关联信息
- 已用Token数和剩余Token数
- 状态标签（正常/已过期/已登录/已暂停）
- 多个快捷操作按钮

<img width="1377" height="832" alt="image" src="https://github.com/user-attachments/assets/f555ba5a-fb10-4d89-8a2f-18d540623423" />



## 📖 使用说明



### 1. 添加Token



点击右上角的 **"➕ 添加Token"** 按钮，在弹出的对话框中填写：

- 域名（例如：d2.api.augmentcode.com）
- Token密钥
- 关联账号（可选）
- 已用Token数量
- 剩余Token数量
- 状态

### 2. 导入Token



1. 点击 **"📥 导入Token"** 按钮
2. 选择JSON格式的Token文件
3. 系统会自动导入所有Token

JSON文件格式示例：

```
{
  "tokens": [
    {
      "domain": "d2.api.augmentcode.com",
      "token": "sk-example-token-1234567890",
      "account": "user@example.com",
      "created_time": "2025/11/17 22:48",
      "used_tokens": 0,
      "remaining_tokens": 34000,
      "status": "normal"
    }
  ]
}
```



### 3. 导出Token



1. 点击 **"📤 导出Token"** 按钮
2. 选择保存位置和文件名
3. 所有Token将以JSON格式导出

### 4. Token操作



每个Token卡片提供以下操作：

- **📋 复制** - 复制Token到剪贴板
- **🔑 环境变量** - 一键设置该Key为系统环境变量（新功能）
- **🔄 刷新** - 刷新Token用量信息
- **✏️ 编辑** - 编辑Token信息
- **🗑️ 删除** - 删除Token（需确认）

💡 **提示**：现在可以直接在卡片上点击 🔑 按钮快速设置环境变量，无需打开对话框！

### 5. 查询用量



点击卡片上的 **🔄 刷新** 按钮可以查询单个Token的最新用量信息。

**特点：**

- ✨ 后台静默刷新，无弹窗打扰
- 🔄 刷新时按钮显示动画效果
- 📊 刷新结果在控制台输出
- ⚡ 自动更新卡片显示

点击顶部的 **"🔄 刷新"** 按钮可以刷新所有Token。

### 6. 环境变量切换（新功能）



**一键设置 API Key 到系统环境变量，实现 Droid CLI 免登录使用**

1. 点击顶部的 **"🔑 切换环境变量"** 按钮
2. 在对话框中选择要设置的 API Key
3. 点击 **"💾 设置环境变量"** 按钮
4. 系统会自动根据你的操作系统（Windows/macOS/Linux）选择最合适的方法设置永久环境变量

**支持的系统：**

- ✅ **Windows** - 使用 `setx` 命令设置用户环境变量
- ✅ **macOS** - 自动写入 `~/.zshrc` 或 `~/.bash_profile`
- ✅ **Linux** - 自动写入 `~/.bashrc` 或 `~/.zshrc`

**视觉反馈：**

- **卡片边框**：当前环境变量的卡片会显示绿色边框
- **按钮颜色**：当前环境变量的🔑按钮会变为绿色背景，一眼识别当前使用的 Key

### 7. 视图切换



**支持卡片视图和列表视图两种展示模式**

点击顶部的 **"📊 列表视图"** 或 **"🎴 卡片视图"** 按钮即可切换。

#### 🎴 卡片视图（默认）



- 直观美观，适合浏览
- 卡片布局，信息完整
- 大图标，操作方便

#### 📊 列表视图



- 信息密集，适合管理大量Key
- 表格布局，一目了然
- 显示内容：
  - **ID** - 序号
  - **API Key** - 账号和Key
  - **使用量/总额度** - 用量统计
  - **开始时间** - 生效时间
  - **结束时间** - 过期时间
  - **状态** - 正常/已封禁/已售
  - **操作** - 🔑切换 🔄刷新 ✏️编辑 🗑️删除

**特点：**

- ✨ 自动保存视图偏好
- ⚡ 切换即时生效
- 🎯 所有功能在两种视图下均可用
- 📱 列表视图更适合大屏幕查看
